# Custom VPN Server - –ò—Ç–æ–≥–∏ –ø—Ä–æ–µ–∫—Ç–∞

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **TCP Proxy Server** - –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä –¥–ª—è Linux
- **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ JSON —Ñ–∞–π–ª
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–∞–π–ª–æ–≤
- **DNS —Ä–µ–∑–æ–ª–≤–∏–Ω–≥** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–º–µ–Ω–Ω—ã—Ö –∏–º–µ–Ω (–Ω–µ —Ç–æ–ª—å–∫–æ IP –∞–¥—Ä–µ—Å–∞)

### –°–µ—Ç–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **–ü—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**: –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ü–µ–ª–µ–≤–æ–π —Ö–æ—Å—Ç –∏ –ø–æ—Ä—Ç
- **–î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö** —á–µ—Ä–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ç—É–Ω–Ω–µ–ª—å  
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤** –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã** —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç `test_vpn.sh`
- **–õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** ‚úÖ
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç** ‚úÖ

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
src/
‚îú‚îÄ‚îÄ main.cpp           - –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ vpn_server.cpp/h   - –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–ª–∞—Å—Å  
‚îú‚îÄ‚îÄ proxy_handler.cpp/h - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
‚îú‚îÄ‚îÄ config.cpp/h       - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ logger.cpp/h       - –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îî‚îÄ‚îÄ utils.cpp/h        - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

test_client.cpp        - –¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç
config.json           - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞
CMakeLists.txt        - –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```

### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
```bash
# –°–±–æ—Ä–∫–∞
./build.sh

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞  
./run.sh

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
./test_vpn.sh

# –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
cd build
./test-client 127.0.0.1 8080 <target_host>:<port>
```

### –ü—Ä–æ—Ç–æ–∫–æ–ª –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
1. **–ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è** –∫ —Å–µ—Ä–≤–µ—Ä—É –Ω–∞ –ø–æ—Ä—Ç 8080
2. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ü–µ–ª–µ–≤–æ–π –∞–¥—Ä–µ—Å**:
   - 4 –±–∞–π—Ç–∞: –¥–ª–∏–Ω–∞ –∏–º–µ–Ω–∏ —Ö–æ—Å—Ç–∞ (network byte order)
   - N –±–∞–π—Ç: –∏–º—è —Ö–æ—Å—Ç–∞/IP –∞–¥—Ä–µ—Å  
   - 2 –±–∞–π—Ç–∞: –ø–æ—Ä—Ç (network byte order)
3. **–°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç**: 1 –±–∞–π—Ç (1=—É—Å–ø–µ—Ö, 0=–æ—à–∏–±–∫–∞)
4. **–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö** –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ TCP —Ç—É–Ω–Ω–µ–ª–µ–π –∫ –ª–æ–∫–∞–ª—å–Ω—ã–º —Å–µ—Ä–≤–∏—Å–∞–º
- –ü–µ—Ä–µ–¥–∞—á–∞ HTTP —Ç—Ä–∞—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤
- –†–µ–∑–æ–ª–≤–∏–Ω–≥ –¥–æ–º–µ–Ω–Ω—ã—Ö –∏–º–µ–Ω (gethostbyname)
- –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤

### ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è  
- –í–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –≤–Ω–µ—à–Ω–∏–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏
- –ù–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –µ—Å—Ç—å)
- –¢–æ–ª—å–∫–æ TCP –ø—Ä–æ—Ç–æ–∫–æ–ª (UDP –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
- –ü—Ä–æ—Å—Ç–æ–π –ø–∞—Ä—Å–µ—Ä JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üöÄ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø—Ä–∏ –≤–Ω–µ—à–Ω–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è—Ö
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤  
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
4. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ UDP, SOCKS –ø—Ä–æ—Ç–æ–∫–æ–ª
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## üìù –í—ã–≤–æ–¥—ã

–°–æ–∑–¥–∞–Ω **–ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π TCP VPN —Å–µ—Ä–≤–µ—Ä** –Ω–∞ C++ –¥–ª—è Linux —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- –ë–∞–∑–æ–≤–æ–≥–æ –ø—Ä–æ–∫—Å–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ ‚úÖ
- –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏ ‚úÖ  
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è ‚úÖ
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ‚úÖ
- DNS —Ä–µ–∑–æ–ª–≤–∏–Ω–≥–∞ ‚úÖ

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤—ã –¥–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö VPN —Ä–µ—à–µ–Ω–∏–π.