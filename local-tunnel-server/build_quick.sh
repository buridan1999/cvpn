#!/bin/bash

# =============================================================================
# –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ Local Tunnel Server –¥–ª—è Linux
# =============================================================================

set -e

echo "üöÄ –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è Linux..."

# –û—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
rm -rf build/
mkdir -p build
cd build

echo "üì¶ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CMake..."
cmake -DCMAKE_BUILD_TYPE=Release ..

echo "üî® –ö–æ–º–ø–∏–ª—è—Ü–∏—è..."
make -j$(nproc)

echo "‚úÖ –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
echo ""
echo "–ó–∞–ø—É—Å–∫:"
echo "cd build && ./local-tunnel-server ../config.json"
echo ""
echo "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: 127.0.0.1:8081"