# Local Tunnel Server

–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π VPN —Ç—É–Ω–Ω–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–ª–∞–≥–∏–Ω–æ–≤.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–æ—Å—Ç–∞—è —Å–±–æ—Ä–∫–∞ (—Ç–æ–ª—å–∫–æ Linux)
```bash
./build_quick.sh
cd build && ./local-tunnel-server ../config.json
```

### –ü–æ–ª–Ω–∞—è —Å–±–æ—Ä–∫–∞ (Linux + Windows)
```bash
./build_all.sh
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Linux
- CMake 3.16+
- GCC/G++ 7+
- make
- pthread

### Windows (–∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª—è—Ü–∏—è)
- MinGW-w64 (`sudo apt install mingw-w64`)

## üèóÔ∏è –°–±–æ—Ä–∫–∞

### –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è Linux
```bash
./build_quick.sh
```

### –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
```bash
./build_all.sh
```

–°–æ–∑–¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ –≤ –ø–∞–ø–∫–µ `dist/`:
- `dist/linux/` - Linux –≤–µ—Ä—Å–∏—è
- `dist/windows/` - Windows –≤–µ—Ä—Å–∏—è  
- `dist/source/` - –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã
- `config.json` - –ü–æ–ª–Ω—ã–π —Ä–µ–∂–∏–º (—Ç—É–Ω–Ω–µ–ª—å + –ø—Ä–æ–∫—Å–∏)
- `config_proxy_only.json` - –¢–æ–ª—å–∫–æ –ø—Ä–æ–∫—Å–∏
- `config_tunnel_only.json` - –¢–æ–ª—å–∫–æ —Ç—É–Ω–Ω–µ–ª—å
- `config_windows.json` - Windows –≤–µ—Ä—Å–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Tunnel Server** (8081) - –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞
- **VPN Server** (8080) - –£–¥–∞–ª—ë–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTP –ø—Ä–æ–∫—Å–∏:
- **–•–æ—Å—Ç**: `127.0.0.1`
- **–ü–æ—Ä—Ç**: `8081`

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
src/                    # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îú‚îÄ‚îÄ main.cpp           # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ vpn_server.*       # VPN —Å–µ—Ä–≤–µ—Ä (—É–¥–∞–ª—ë–Ω–Ω—ã–π)
‚îú‚îÄ‚îÄ tunnel_server.*    # Tunnel —Å–µ—Ä–≤–µ—Ä (–ª–æ–∫–∞–ª—å–Ω—ã–π)
‚îú‚îÄ‚îÄ proxy_handler.*    # HTTP CONNECT –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
‚îú‚îÄ‚îÄ tunnel_handler.*   # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ encryption_manager.* # –ú–µ–Ω–µ–¥–∂–µ—Ä —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
‚îî‚îÄ‚îÄ config.*          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

encryption_plugins/     # –ü–ª–∞–≥–∏–Ω—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ xor_encryption.cpp # XOR —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
‚îî‚îÄ‚îÄ caesar_encryption.cpp # Caesar —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
```

### –û—Ç–ª–∞–¥–∫–∞
```bash
# –°–±–æ—Ä–∫–∞ —Å AddressSanitizer
mkdir -p build_debug
cd build_debug
cmake -DCMAKE_BUILD_TYPE=Debug \
      -DCMAKE_CXX_FLAGS="-fsanitize=address -fno-omit-frame-pointer -g" ..
make
./local-tunnel-server ../config.json
```

## üîí –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–æ–¥—É–ª—å–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–ª–∞–≥–∏–Ω—ã:

### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã
- **XOR** - –ü—Ä–æ—Å—Ç–æ–µ XOR —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- **Caesar** - –®–∏—Ñ—Ä –¶–µ–∑–∞—Ä—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `encryption_plugins/`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `EncryptionInterface` 
3. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ `create_encryption` –∏ `destroy_encryption`
4. –û–±–Ω–æ–≤–∏—Ç–µ `CMakeLists.txt`

## üåç –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- ‚úÖ Linux (x86_64)
- ‚úÖ Windows (x86_64, –∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª—è—Ü–∏—è)
- üîÑ macOS (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫ (–±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ `lib`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π (.so/.dll)
- Unix-—Å—Ç–∏–ª—å –ø—É—Ç–µ–π –≤–æ –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥–∞—Ö

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
- `DEBUG` - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `INFO` - –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è  
- `WARN` - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `ERROR` - –û—à–∏–±–∫–∏

## üõ†Ô∏è –°–∫—Ä–∏–ø—Ç—ã

- `build_all.sh` - –ü–æ–ª–Ω–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- `build_quick.sh` - –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è Linux
- `build.sh` - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–±–æ—Ä–∫–∞ (—Ç–æ–ª—å–∫–æ Linux)

## üö¶ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
# –°–±–æ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
cd build
./test-client

# –¢–µ—Å—Ç –±—Ä–∞—É–∑–µ—Ä–∞
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–∫—Å–∏ 127.0.0.1:8081 –≤ Firefox/Chrome
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
./local-tunnel-server ../config.json

# –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
# "Tunnel Server –∑–∞–ø—É—â–µ–Ω –Ω–∞ 127.0.0.1:8081"
# "VPN Server –∑–∞–ø—É—â–µ–Ω –Ω–∞ 0.0.0.0:8080"
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## ‚ùì –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ GitHub.